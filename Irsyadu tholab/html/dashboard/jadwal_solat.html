<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
   <title>Jadwal Sholat</title>

   <!-- Favicon -->
   <link rel="shortcut icon" href="../assets/images/jadwal_salat.ico" />

   <!-- Library / Plugin Css Build -->
   <link rel="stylesheet" href="../assets/css/core/libs.min.css" />

   <!-- Aos Animation Css -->
   <link rel="stylesheet" href="../assets/vendor/aos/dist/aos.css" />

   <!-- Hope Ui Design System Css -->
   <link rel="stylesheet" href="../assets/css/hope-ui.min.css?v=2.0.0" />

   <!-- Custom Css -->
   <link rel="stylesheet" href="../assets/css/custom.min.css?v=2.0.0" />

   <!-- Dark Css -->
   <link rel="stylesheet" href="../assets/css/dark.min.css" />

   <!-- Customizer Css -->
   <link rel="stylesheet" href="../assets/css/customizer.min.css" />

   <!-- RTL Css -->
   <link rel="stylesheet" href="../assets/css/rtl.min.css" />
</head>
<style>
   .circle-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0;
   }

   .circle-background {
      fill: none;
      stroke: #f0f0f0;
      stroke-width: 12;
   }

   .circle-foreground {
      fill: none;
      stroke: #0277d8;
      stroke-width: 12;
      stroke-linecap: round;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
      stroke-dasharray: 440;
      /* Perimeter lingkaran (2 * PI * r) */
      stroke-dashoffset: 440;
      /* Full circumference untuk animasi */
      transition: stroke-dashoffset 1s linear;
      filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.2));
   }

   .countdown-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: #212529;
      text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
   }

   .circle-container h2 {
      font-size: 16px;
      margin-bottom: 5px;
   }

   table td,
   table th {
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
   }

   tbody td {
      font-weight: 500;
      color: #999999;
   }

   .card {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
   }

   .countdown {
      font-size: 20px;
      font-weight: bold;
      color: #28a745;
   }
</style>

<body class="  ">
   <!-- loader Start -->
   <div id="loading">
      <div class="loader simple-loader">
         <div class="loader-body"></div>
      </div>
   </div>
   <!-- loader END -->

   <aside class="sidebar sidebar-default sidebar-white sidebar-base navs-rounded-all">
      <div class="sidebar-header d-flex align-items-center justify-content-start">
         <div class="navbar-brand" style="pointer-events: none;">
            <!--Logo start-->
            <!--logo End-->

            <!--Logo start-->
            <div class="logo-main">
               <div class="logo-normal">
                  <img src="../assets/logo.png" height="40px" alt="">
               </div>
               <div class="logo-mini">
                  <img src="../assets/logo.png" height="40px" alt="">
               </div>
            </div>
            <!--logo End-->




            <h5 class="logo-title ">Irsyadu Thulab</h5>
         </div>
         <div class="sidebar-toggle" data-toggle="sidebar" data-active="true">
            <i class="icon">
               <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4.25 12.2744L19.25 12.2744" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                     stroke-linejoin="round"></path>
                  <path d="M10.2998 18.2988L4.2498 12.2748L10.2998 6.24976" stroke="currentColor" stroke-width="1.5"
                     stroke-linecap="round" stroke-linejoin="round"></path>
               </svg>
            </i>
         </div>
      </div>
      <div class="sidebar-body pt-0 data-scrollbar">
         <div class="sidebar-list">
            <!-- Sidebar Menu Start -->
            <ul class="navbar-nav iq-main-menu" id="sidebar-menu">
               <li class="nav-item static-item">
                  <a class="nav-link static-item disabled" href="#" tabindex="-1">
                     <span class="default-icon">Home</span>
                     <span class="mini-icon">-</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link " aria-current="page" href="index.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/menu.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Beranda</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="alquran.html">
                     <i class="icon fw-lighter">
                        <img class="icon-20" src="../assets/icon/sidebar/quran.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Al-Quran</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="jadwal_solat.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/jadwal.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Jadwal Sholat</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="sunnah.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/sunah.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Sunnah Nabi</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="maulid.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/muhammad.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Maulid Nabi</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="doa.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/doa.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Doa Doa</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="kalender.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/kalender.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Kalender</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="praktek.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/praktek.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Praktek Ibadah</span>
                  </a>
               </li>
               <li>
                  <hr class="hr-horizontal">
               </li>
               <li class="nav-item static-item">
                  <a class="nav-link static-item disabled" href="#" tabindex="-1">
                     <span class="default-icon">Lainnya</span>
                     <span class="mini-icon">-</span>
                  </a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="tentang.html">
                     <i class="icon">
                        <img class="icon-20" src="../assets/icon/sidebar/tentang.png" style="opacity: 70%;">
                     </i>
                     <span class="item-name">Tentang Kami</span>
                  </a>
               </li>

            </ul>
            <!-- Sidebar Menu End -->
         </div>
      </div>
      <div class="sidebar-footer"></div>
   </aside>
   <main class="main-content" style="height: 85vh;">
      <div class="position-relative iq-banner">
         <!--Nav Start-->
         <nav class="nav navbar navbar-expand-lg navbar-light iq-navbar position-fixed" style="width: 100%; top: 0;">
            <div class="container-fluid navbar-inner">
               <a href="../dashboard/index.html" class="navbar-brand ms-auto me-auto">
                  <!--Logo start-->
                  <!--logo End-->

                  <!--Logo start-->
                  <div class="logo-main">
                     <div class="logo-normal">
                        <img src="../assets/logo.png" height="40px" alt="">
                     </div>
                     <div class="logo-mini">
                        <img src="../assets/logo.png" height="40px" alt="">
                     </div>
                  </div>
                  <!--logo End-->

                  <h4 class="logo-title irsyad">Irsyadu Thulab</h4>
               </a>
               <div class="sidebar-toggle" data-toggle="sidebar" data-active="true">
                  <i class="icon">
                     <img src="../assets/icon/bar.png" class="icon-20" alt="">
                  </i>
               </div>
            </div>
         </nav>

         <!-- Nav Header Component Start -->
         <div class="iq-navbar-header" style="height: 200px; margin-top: 70px;">
            <div class="container-fluid iq-container">
               <div class="row">
                  <div class="col-md-12">
                     <div class="flex-wrap  text-center">
                        <div class="d-flex justify-content-center gap-2 align-items-center">
                           <img src="../assets/icon/pattern.png" height="40px" alt="" />
                           <h2 class="mx-lg-5 fs-lg-1"> Jangan Lupa Sholat </h2>
                           <img src="../assets/icon/pattern.png" height="40px" alt="" />
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="iq-header-img">
               <img src="../assets/images/dashboard/solat.jpg" alt="header"
                  class="theme-color-default-img img-fluid w-100 h-100 animated-scaleX" />
               <img src="../assets/images/dashboard/top-header1.png" alt="header"
                  class="theme-color-purple-img img-fluid w-100 h-100 animated-scaleX" />
               <img src="../assets/images/dashboard/top-header2.png" alt="header"
                  class="theme-color-blue-img img-fluid w-100 h-100 animated-scaleX" />
               <img src="../assets/images/dashboard/top-header3.png" alt="header"
                  class="theme-color-green-img img-fluid w-100 h-100 animated-scaleX" />
               <img src="../assets/images/dashboard/top-header4.png" alt="header"
                  class="theme-color-yellow-img img-fluid w-100 h-100 animated-scaleX" />
               <img src="../assets/images/dashboard/top-header5.png" alt="header"
                  class="theme-color-pink-img img-fluid w-100 h-100 animated-scaleX" />
            </div>
         </div>
         <!-- Nav Header Component End -->
         <!--Nav End-->
      </div>
      <div class="container mt-n5 p-0">
         <div class="overflow-hidden d-slider1">
                     <ul class="container p-0 m-0  mb-2">
                        <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="700">
                           <div class="card-body text-center">
                              <div class="row mt-2">
                                 <div class="col-12">
                                    <div class="mt-4 d-flex align-items-center justify-content-center">
                                       <h5 class="fw-bolder" id="sholat-berikutnya"></h5>
                                       <div class="circle-container">
                                          <div class="">
                                             <svg width="200" height="200">
                                                <circle class="circle-background" cx="100" cy="100" r="70" />
                                                <circle class="circle-foreground" cx="100" cy="100" r="70" />
                                             </svg>
                                          </div>
                                          <div class="countdown-text" id="countdown">00:00:00</div>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="container text-center p-5">
                                    <h1 class="text-primary fw-bold">Waktu Sholat Hari Ini</h1>
                                    <p class="lead fw-bolder">Waktu sholat berdasarkan lokasi Anda</p>
                                    <div class="row justify-content-center">
                                       <table class="table mb-0 border-2">
                                          <thead>
                                             <tr>
                                                <th scope="col">Sholat</th>
                                                <th scope="col">Waktu</th>
                                             </tr>
                                          </thead>
                                          <tbody id="waktu-sholat">
                                             <!-- Waktu Sholat akan ditambahkan oleh JavaScript -->
                                          </tbody>
                                       </table>
                                    </div>
                                 </div>


                              </div>
                           </div>
                        </li>
                     </ul>
         </div>
      </div>
      </div>

      <!-- Footer Section Start -->
   </main>
      <footer class="footer">
         <div class="footer-body">
            <ul class="left-panel list-inline mb-0 p-0">
               <li class="list-inline-item">
                  <img src="../assets/logo altie putih.png" height="20px" alt="">
                  <a href="https://smk-alittihad.sch.id/">SMKS Al Ittihad</a>
               </li>
            </ul>
            <div class="right-panel">
               Copyright 
               ©<script>
                  document.write(new Date().getFullYear());
               </script> SMK Al-Ittihad.
               by <a href="index.html">TEFATIE</a>.
            </div>
         </div>
      </footer>
      <!-- Footer Section End -->
   
   <!-- Wrapper End-->
   <!-- offcanvas start -->
   <script>
      async function getPrayerTimes(latitude, longitude) {
         const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=2`);
         const data = await response.json();
   
         const filteredTimes = {
            Fajr: data.data.timings.Fajr,
            Dhuhr: data.data.timings.Dhuhr,
            Asr: data.data.timings.Asr,
            Maghrib: data.data.timings.Maghrib,
            Isha: data.data.timings.Isha
         };
   
         return filteredTimes;
      }
   
      function getRemainingTime(targetTime) {
         const now = new Date();
         const target = new Date(now.toDateString() + ' ' + targetTime);
         const difference = target - now;
   
         if (difference > 0) {
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            return { hours, minutes, seconds, total: difference };
         }
         return { hours: 0, minutes: 0, seconds: 0, total: 0 };
      }
   
      function findCurrentAndNextSholat(waktuSholat) {
         const now = new Date();
         const currentTime = now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');
         let previousSholat = null;
         let nextSholat = null;
   
         for (const [sholat, waktu] of Object.entries(waktuSholat)) {
            if (currentTime >= waktu) {
               previousSholat = { sholat, waktu }; 
            } else if (!nextSholat && currentTime < waktu) {
               nextSholat = { sholat, waktu }; 
            }
         }
   
         if (!nextSholat) {
            const tomorrowFajr = new Date();
            tomorrowFajr.setDate(tomorrowFajr.getDate() + 1);
            nextSholat = { sholat: 'Fajr', waktu: waktuSholat.Fajr + ' (esok)' };
         }
   
         return { previousSholat, nextSholat };
      }
   
      function updateSholatCountdown(waktuSholat) {
         const { previousSholat, nextSholat } = findCurrentAndNextSholat(waktuSholat);
         const countdownTextElement = document.getElementById('countdown');
         const sholatBerikutnyaElement = document.getElementById('sholat-berikutnya');
         const circleForeground = document.querySelector('.circle-foreground');
   
         if (previousSholat && nextSholat) {
            sholatBerikutnyaElement.textContent = `Sholat berikutnya: ${nextSholat.sholat} - ${nextSholat.waktu}`;
   
            const now = new Date();
            const target = new Date(now.toDateString() + ' ' + nextSholat.waktu);
            const initialDifference = target - now;
   
            const interval = setInterval(() => {
               const remainingTime = getRemainingTime(nextSholat.waktu);
               countdownTextElement.textContent = `${remainingTime.hours.toString().padStart(2, '0')}:${remainingTime.minutes.toString().padStart(2, '0')}:${remainingTime.seconds.toString().padStart(2, '0')}`;
   
               const percentRemaining = remainingTime.total / initialDifference;
               const circleOffset = 408 * percentRemaining;
               circleForeground.style.strokeDashoffset = circleOffset;
   
               if (remainingTime.total <= 0) {
                  clearInterval(interval);
                  updateSholatCountdown(waktuSholat);
               }
            }, 1000);
         }
      }
   
      document.addEventListener("deviceready", function() {
         navigator.geolocation.getCurrentPosition(async (position) => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
   
            const waktuSholat = await getPrayerTimes(latitude, longitude);
            displayPrayerTimes(waktuSholat);
            updateSholatCountdown(waktuSholat);
         }, (error) => {
            console.error("Geolocation error:", error);
            alert("Gagal mendapatkan lokasi. Pastikan izin lokasi telah diaktifkan.");
         });
      }, false);
   
      function displayPrayerTimes(waktuSholat) {
         const tbody = document.getElementById('waktu-sholat');
         tbody.innerHTML = '';
         for (const [sholat, waktu] of Object.entries(waktuSholat)) {
            const row = document.createElement('tr');
            row.innerHTML = `<td class="fw-bold">${sholat}</td><td class="fw-bold">${waktu}</td>`;
            tbody.appendChild(row);
         }
      }
   </script>
   

   <!-- Library Bundle Script -->
   <script src="../assets/js/core/libs.min.js"></script>

   <!-- External Library Bundle Script -->
   <script src="../assets/js/core/external.min.js"></script>

   <!-- Widgetchart Script -->
   <script src="../assets/js/charts/widgetcharts.js"></script>

   <!-- mapchart Script -->
   <script src="../assets/js/charts/vectore-chart.js"></script>
   <script src="../assets/js/charts/dashboard.js"></script>

   <!-- fslightbox Script -->
   <script src="../assets/js/plugins/fslightbox.js"></script>

   <!-- Settings Script -->
   <script src="../assets/js/plugins/setting.js"></script>

   <!-- Slider-tab Script -->
   <script src="../assets/js/plugins/slider-tabs.js"></script>

   <!-- Form Wizard Script -->
   <script src="../assets/js/plugins/form-wizard.js"></script>

   <!-- AOS Animation Plugin-->
   <script src="../assets/vendor/aos/dist/aos.js"></script>

   <!-- App Script -->
   <script src="../assets/js/hope-ui.js" defer></script>
</body>

</html>